/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[16],{426:function(Ca,va,r){function oa(y,aa,fa){aa.endsWith("/")||(aa+="/");fa=fa||{};var ca=fa.disableWebsockets||!1;this.wW=fa.singleServerMode||!1;null!=fa.customQueryParameters&&Object(n.b)("wvsQueryParameters",fa.customQueryParameters);aa.endsWith("blackbox/")||(aa+="blackbox/");this.xn=fa.uploadData||null;this.vx=fa.uriData||null;this.aP=fa.cacheKey||null;this.yT=fa.officeOptions||null;this.Eu=Object(f.a)(aa,null,ca);this.Ze=
aa;this.pG=y;this.sf=null;this.Pj=ka();this.vm=ka();this.$z=!1;this.jg=this.Od=this.ge=this.Xe=null;this.wf=[];this.NA=[];this.cache={};this.timeStamp=0;this.Sf=[];this.oh=[];this.PG=null;this.iG=!1;this.mK=this.id=null;this.NI=this.VR=ha;this.UC=0;this.SH=!1;this.tT=1;this.li={};this.Jq=0;this.rs=la();this.Xp(!0)}function la(){var y={Hr:{},yb:[],pop:function(){var aa=y.yb.pop();y.Hr[aa.key]=void 0;return aa},push:function(aa,fa){fa={key:aa,data:fa};y.yb.push(fa);y.Hr[aa]=fa.data},contains:function(aa){return!!y.Hr[aa]},
get:function(aa){return y.Hr[aa]},set:function(aa,fa){y.Hr[aa]=fa;y.yb.forEach(function(ca,ea){ca.key==aa&&(y.yb[ea]=ca)})},remove:function(aa){y.Hr[aa]=void 0;y.yb.forEach(function(fa,ca){fa.key==aa&&y.yb.splice(ca,1)})},length:function(){return y.yb.length}};return y}function ka(){var y={promise:null,resolve:null,reject:null,state:0,result:null,request:null,Tr:function(){return 1===(y.state&1)},faa:function(){return 2===(y.state&2)},gi:function(){return!y.faa()&&!y.Tr()},H$:function(){return 4===
(y.state&4)},QV:function(){y.state|=4}};y.promise=new Promise(function(aa,fa){y.resolve=function(){if(0===y.state||4===y.state)y.state=1,y.result=arguments[0],aa.apply(null,arguments)};y.reject=function(){if(0===y.state||4===y.state)y.state=2,fa.apply(null,arguments)}});return y}function ha(){return!1}function da(y,aa,fa){if(!(aa in ba))return!0;aa=ba[aa];for(var ca=0;ca<aa.length;ca++){var ea=y;var ia=aa[ca];var ja=fa;if(ia.name in ea){var na="",ma=!1;ea=ea[ia.name];switch(ia.type){case "s":na="String";
ma=Object(z.isString)(ea);break;case "a":na="Array";ma=Object(z.isArray)(ea);break;case "n":na="Number";ma=Object(z.isNumber)(ea)&&Object(z.isFinite)(ea);break;case "o":na="Object",ma=Object(z.isObject)(ea)&&!Object(z.isArray)(ea)}ma||ja.reject('Expected response field "'+ia.name+'" to have type '+na);ia=ma}else ja.reject('Response missing field "'+ia.name+'"'),ia=!1;if(!ia)return!1}return!0}r.r(va);var z=r(0);r.n(z);var w=r(2);Ca=r(52);var x=r(31),f=r(444),a=r(89),b=r(360),e=r(112),n=r(39),h=r(159),
ba={pages:[{name:"pages",type:"a"}],pdf:[{name:"url",type:"s"}],docmod:[{name:"url",type:"s"},{name:"rID",type:"s"}],health:[],tiles:[{name:"z",type:"n"},{name:"rID",type:"n"},{name:"tiles",type:"a"},{name:"size",type:"n"}],annots:[{name:"url",type:"s"},{name:"name",type:"s"}],image:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],text:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],ApString2Xod:[{name:"url",type:"s"},{name:"rID",type:"s"}]};oa.prototype=Object(z.extend)(oa.prototype,
{X3:function(){var y=this;return new Promise(function(aa,fa){var ca=new XMLHttpRequest;ca.open("GET",y.Ze+"ck");ca.withCredentials=y.Tk();ca.onreadystatechange=function(){ca.readyState===XMLHttpRequest.DONE&&(200===ca.status?aa():fa())};ca.send()})},Sfa:function(y,aa){this.VR=y||ha;this.NI=aa||ha},qP:function(){var y=this;this.vm=ka();this.Pj=ka();return this.Eu.EG().then(function(){y.$z=!1;y.id=null;y.iG=!1;return y.X3()})},ZJ:function(){this.VR();this.iI();this.Xe&&(this.Xe.gi()?this.Jg(this.Xe.request):
this.Xe.Tr()&&this.NI(this.Xe.result.url,"pdf")&&(this.Xe=null,this.nV()));this.jg&&this.jg.gi()&&this.Jg(this.jg.request);this.ge&&this.ge.gi()?this.Jg(this.ge.request):this.Od&&this.Od.gi()&&this.KR(this.Od.request);var y;for(y=0;y<this.Sf.length;y++)this.Sf[y]&&this.Sf[y]&&(this.Sf[y].gi()?this.Jg(this.Sf[y].request):this.Sf[y].Tr()&&this.NI(this.Sf[y].result.url,"image")&&(this.Sf[y]=null,this.RC(Object(z.uniqueId)(),y)));for(y=0;y<this.oh.length;y++)this.oh[y]&&this.oh[y]&&this.oh[y].gi()&&!this.oh[y].H$()&&
this.Jg(this.oh[y].request);for(y=0;y<this.wf.length;y++)this.wf[y]&&this.wf[y].gi()&&this.Jg(this.wf[y].request)},iI:function(y){var aa=this;this.$z||(this.timeStamp=Date.now(),this.Eu.SK(function(fa){aa.yba(fa)},function(){return null},function(){return null},!0).then(function(){clearInterval(aa.JC);aa.JC=null},function(fa){aa.$z=!1;if(!aa.JC){var ca=0;aa.iG=!0;aa.mK=0;aa.JC=setInterval(function(){2>ca++?aa.ZJ():(clearInterval(aa.JC),y&&y.reject(e.a),Object(w.g)("WebViewerServer connection failed:"+
fa))},5E3)}}),this.$z=!0)},kia:function(){var y=this,aa=createPromiseCapability();if(this.xn){var fa=new FormData;fa.append("file",this.xn.fileHandle,this.xn.fileHandle.name);var ca=this.xn.loadCallback;var ea="upload";var ia=this.xn.extension}else if(this.vx){fa={uri:this.vx.uri,$la:this.vx.shareId};fa=Object.keys(fa).map(function(ra){return ra+"="+(fa[ra]?encodeURIComponent(fa[ra]):"")}).join("&");var ja="application/x-www-form-urlencoded; charset=UTF-8";ca=this.vx.loadCallback;ea="url";ia=this.vx.extension}else return Promise.resolve();
var na=new XMLHttpRequest,ma=Object(x.j)(y.Ze,"AuxUpload");ma=Object(h.a)(ma)+"&type="+ea+"&ext="+ia;na.open("POST",ma);na.withCredentials=this.Tk();ja&&na.setRequestHeader("Content-Type",ja);na.addEventListener("load",function(){if(na.readyState===na.DONE&&200===na.status){var ra=JSON.parse(na.response);y.pG=ra.uri;ca(ra);aa.resolve(ra)}});na.addEventListener("error",function(){aa.reject(na.statusText+" "+JSON.stringify(na))});this.xn&&null!=this.xn.onProgress&&(na.upload.onprogress=function(ra){y.xn.onProgress(ra)});
na.send(fa);return aa.promise},oea:function(y){this.password=y||null;this.Pj.Tr()||(this.Pj=ka(),this.Jg({t:"pages"}));return this.Pj.promise},Dw:function(y){this.PG=y||null;this.Pj.Tr()||(this.iI(this.Pj),this.Jg({t:"pages"}));return this.Pj.promise},Du:function(y){y=Object.assign(y,{uri:encodeURIComponent(this.pG)});this.PG&&(y.ext=this.PG);this.sf&&(y.c=this.sf);this.password&&(y.pswd=this.password);this.aP&&(y.cacheKey=this.aP);this.yT&&(y.officeOptions=this.yT);return y},Uea:function(){0<this.rs.length()&&
10>=this.Jq&&this.Vea(this.rs.pop().data)},t2:function(y){return 0<this.rs.length()&&this.rs.contains(y)?(this.rs.remove(y),!0):!1},Jg:function(y){y=this.Du(y);this.Eu.send(y)},DV:function(y,aa){10<this.Jq?this.rs.push(y,aa):(this.Jq++,y=this.Du(aa),this.Eu.send(y))},Vea:function(y){this.Jq++;y=this.Du(y);this.Eu.send(y)},Fk:function(y){return y},yba:function(y){var aa=this,fa=y.data,ca=y.err,ea=y.t;switch(ea){case "upload":ca?aa.lia.reject(ca):aa.lia.resolve("Success");break;case "pages":ca?aa.Pj.reject(ca):
da(fa,ea,aa.Pj)&&aa.Pj.resolve(fa);break;case "config":if(ca)aa.vm.reject(ca);else if(da(fa,ea,aa.vm)){fa.id&&(aa.id=fa.id);if(fa.auth){var ia=Object(n.a)("wvsQueryParameters");ia.auth=fa.auth;Object(n.b)("wvsQueryParameters",ia)}fa.serverVersion&&(aa.BX=fa.serverVersion,Object(w.h)("[WebViewer Server] server version: "+aa.BX));fa.serverID?(aa.UC=fa.serverID===aa.mK&&aa.SH?aa.UC+1:0,aa.mK=fa.serverID):aa.UC=0;aa.SH=!1;aa.vm.resolve(fa)}break;case "health":ca?aa.vm.reject(ca):da(fa,ea,aa.vm)&&(fa=
fa.unhealthy,aa.wW&&fa?Object(w.j)("Server failed health check. Single server mode ignoring check."):!aa.ska&&fa&&1>=aa.UC&&(aa.SH=!0,aa.qP().then(function(){aa.ZJ()},function(){aa.ZJ()})));break;case "pdf":fa.url=Object(h.a)(aa.Ze+"../"+encodeURI(fa.url));ca?aa.Xe.reject(ca):da(fa,ea,aa.Xe)&&aa.Xe.resolve(fa);break;case "ApString2Xod":fa.url=Object(h.a)(aa.Ze+"../data/"+encodeURI(fa.url));ca?aa.li[fa.rID].reject(ca):da(fa,ea,aa.li[fa.rID])&&aa.li[fa.rID].resolve(fa);break;case "docmod":fa.url=Object(h.a)(aa.Ze+
"../"+encodeURI(fa.url));ca?aa.li[fa.rID].reject(ca):da(fa,ea,aa.Xe)&&aa.li[fa.rID].resolve(fa);break;case "xod":if(ca)this.ge&&this.ge.gi()&&this.ge.reject(ca),this.Od&&this.Od.gi()&&this.Od.reject(ca);else if(fa.notFound)fa.noCreate||this.ge&&this.ge.gi()&&this.ge.resolve(fa),this.Od&&this.Od.gi()&&this.Od.resolve(fa);else{fa.url&&(fa.url=Object(h.a)(aa.Ze+"../"+encodeURI(fa.url)));if(!this.Od||this.Od.Tr())this.Od=ka(),this.Od.request={t:"xod",noCreate:!0};this.ge||(this.ge=ka(),this.ge.request=
{t:"xod"});this.Od.resolve(fa);this.ge.resolve(fa)}break;case "annots":if(ca)aa.jg.reject(ca);else if(da(fa,ea,aa.jg)){aa.jg.QV();var ja=new XMLHttpRequest;ia=aa.Ze+"../"+encodeURI(fa.url);var na=fa.hasAppearance?Object(h.a)(ia+".xodapp"):null;ja.open("GET",Object(h.a)(ia));ja.responseType="text";ja.withCredentials=this.Tk();ja.addEventListener("load",function(){ja.readyState===ja.DONE&&200===ja.status&&aa.jg.resolve({oL:ja.response,Cz:na})});ja.addEventListener("error",function(){aa.jg.reject(ja.statusText+
" "+JSON.stringify(ja))});ja.send()}break;case "image":aa.Jq--;var ma=this.Sf[fa.p];ca?ma.promise.reject(ca):da(fa,ea,ma)&&(ma.result=fa,ma.result.url=Object(h.a)(aa.Ze+"../"+encodeURI(ma.result.url)),ma.resolve(ma.result));break;case "tiles":aa.Jq--;ma=fa.rID;ia=this.wf[ma];this.wf[ma]=null;this.NA.push(ma);if(ca)ia.reject(ca);else if(da(fa,ea,ia)){for(ca=0;ca<fa.tiles.length;ca++)fa.tiles[ca]=Object(h.a)(aa.Ze+"../"+encodeURI(fa.tiles[ca]));ia.resolve(fa)}break;case "text":ma=this.oh[fa.p];if(ca)ma.reject(ca);
else if(da(fa,ea,ma)){ma.QV();var ra=new XMLHttpRequest;fa=Object(h.a)(aa.Ze+"../"+encodeURI(fa.url));ra.open("GET",fa);ra.withCredentials=this.Tk();ra.addEventListener("load",function(){ra.readyState===ra.DONE&&200===ra.status&&(ma.result=JSON.parse(ra.response),ma.resolve(ma.result))});ra.addEventListener("error",function(sa){ma.reject(ra.statusText+" "+JSON.stringify(sa))});ra.send()}break;case "progress":"loading"===fa.t&&aa.trigger(a.a.Events.DOCUMENT_LOADING_PROGRESS,[fa.bytes,fa.total])}this.Uea();
!ea&&y.echo&&y&&"apstring2xod"==y.echo.t&&(y=y.echo.reqID)&&(2<=parseInt(aa.BX)?aa.li[y].reject("Message unhandled by server"):aa.li[y].reject())},QQ:function(){this.iI(this.vm);return this.vm.promise},F7:function(y){for(var aa=this,fa=new XMLHttpRequest,ca=Object(h.a)(this.Ze+"aul")+"&id="+this.id,ea=new FormData,ia={},ja=0;ja<y.body.length;ja++){var na=y.body[ja];ia[na.id]=na.BF.w+";"+na.BF.h;ea.append(na.id,na.BF.dataString)}y={t:"apstring2xod",reqID:this.tT++,parts:ia};var ma=this.Du(y);ea.append("msg",
JSON.stringify(ma));aa.li[ma.reqID]=ka();fa.open("POST",ca);fa.withCredentials=aa.Tk;ca=new Promise(function(ra,sa){fa.onreadystatechange=function(){4===fa.readyState&&(200===fa.status?ra():sa("An error occurred while sending down appearance strings to the server"))}});fa.send(ea);return ca.then(function(){return aa.li[ma.reqID].promise})},E7:function(){this.jg||(this.jg=ka(),this.jg.request={t:"annots"},this.Jg(this.jg.request));return this.jg.promise},RC:function(y,aa){this.Sf[aa]||(this.Sf[aa]=
ka(),this.Sf[aa].request={t:"image",p:aa},this.DV(y,this.Sf[aa].request));return this.Sf[aa].promise},pea:function(y){this.oh[y]||(this.oh[y]=ka(),this.oh[y].request={t:"text",p:y},this.Jg(this.oh[y].request));return this.oh[y].promise},qea:function(y,aa,fa,ca,ea){var ia=this.wf.length;this.NA.length&&(ia=this.NA.pop());this.wf[ia]=ka();this.wf[ia].request={t:"tiles",p:aa,z:fa,r:ca,size:ea,rID:ia};this.DV(y,this.wf[ia].request);return this.wf[ia].promise},nV:function(){this.Xe||(this.Xe=ka(),this.Xe.request=
{t:"pdf"},this.iG?this.Xe.resolve({url:this.pG}):this.Jg(this.Xe.request));return this.Xe.promise},mR:function(y){var aa=this,fa=new XMLHttpRequest,ca=Object(h.a)(this.Ze+"aul")+"&id="+this.id,ea=new FormData,ia={};y.annots&&(ia.annots="xfdf");y.watermark&&(ia.watermark="png");y.redactions&&(ia.redactions="redact");ia={t:"docmod",reqID:this.tT++,parts:ia};y.print&&(ia.print=!0);var ja=this.Du(ia);ea.append("msg",JSON.stringify(ja));return Promise.all([y.annots,y.watermark,y.redactions].map(function(na){return Promise.resolve(na)})).then(function(na){var ma=
na[0],ra=na[1],sa=na[2];ma&&ea.append("annots",ma);ra&&ea.append("watermark",na.watermark);sa&&ea.append("redactions",sa);aa.li[ja.reqID]=ka();fa.open("POST",ca);fa.withCredentials=aa.Tk;na=new Promise(function(ua,pa){fa.onreadystatechange=function(){4===fa.readyState&&(200===fa.status?ua():pa("An error occurred while sending down annotation data to the server"))}});fa.send(ea);return na.then(function(){return aa.li[ja.reqID].promise})})},KR:function(){this.Od||(this.Od=ka(),this.Od.request={t:"xod",
noCreate:!0},this.Jg(this.Od.request));return this.Od.promise},rea:function(){this.ge||(this.ge=ka(),this.ge.request={t:"xod"},this.Jg(this.ge.request));return this.ge.promise},jn:function(){return!0},request:function(){},LU:function(){},abort:function(){for(var y=0;y<this.wf.length;y++)this.wf[y]&&(this.wf[y].resolve(null),this.wf[y]=null,this.NA.push(y));this.close()},eD:function(y){this.sf=this.sf||{};this.sf.headers=y},Mka:function(){return this.sf?Object(z.omit)(this.sf.headers,["Cookie","cookie"]):
null},Xp:function(y){this.sf=this.sf||{};this.sf.internal=this.sf.internal||{};this.sf.internal.withCredentials=y},Tk:function(){return this.sf&&this.sf.internal?this.sf.internal.withCredentials:null},getFileData:function(){return Promise.reject()}});Object(Ca.a)(oa);Object(b.a)(oa);Object(b.b)(oa);va["default"]=oa},444:function(Ca,va,r){function oa(z,w,x){function f(b,e){function n(ra){ba().then(function(sa){ia&&!ja?setTimeout(function(){n(ra)},1):sa.send(JSON.stringify(ra))})}function h(ra,sa,ua,
pa){var qa=window.createPromiseCapability(),wa=!1,Fa=qa;fa=ra;ca=sa;ea=ua;aa=null;pa&&(ra=Object(ha.a)("wvsQueryParameters"),ra.bcid=Object(ka.k)(8),Object(ha.b)("wvsQueryParameters",ra));try{ra=na?ma+"/"+na:ma+"/ws";ra=Object(da.a)(ra);var Ia=new WebSocket(ra);Ia.onopen=function(){qa.resolve();wa=!0;qa=null;ia=!1;y.resolve(Ia);ca&&ca()};Ia.onerror=function(Ga){ia=ja=!0;qa&&qa.reject(Ga);aa&&aa.reject()};Ia.onclose=function(){y=window.createPromiseCapability();ia=!0;aa||(aa=window.createPromiseCapability());
aa.resolve();ea&&ea();fa&&wa&&fa({t:"health",data:{unhealthy:!0,isDead:!0}})};Ia.onmessage=function(Ga){Ga&&Ga.data&&(Ga=JSON.parse(Ga.data),Ga.hb?n({hb:!0}):Ga.end?close():fa(Ga))}}catch(Ga){qa.reject(Ga),qa=null}return Fa.promise}function ba(){ia&&fa&&h(fa);return y.promise}var y=window.createPromiseCapability(),aa=null,fa,ca,ea=null,ia=!1,ja=!1,na=e,ma=function(ra){var sa=ra.indexOf("://"),ua="ws://";0>sa?sa=0:(5===sa&&(ua="wss://"),sa+=3);var pa=ra.lastIndexOf("/");0>pa&&(pa=ra.length);return ua+
ra.slice(sa,pa)}(b);return{send:n,SK:h,EG:function(){return aa?aa.promise:ba().then(function(ra){aa=window.createPromiseCapability();fa=null;ra.close();return aa.promise})}}}function a(b){var e=b.lastIndexOf("/");0>e&&(e=b.length);return b.slice(0,e)}return window.WebSocket&&!x?f(z,w):function(b,e){function n(ra){(ea?ea.promise:Promise.resolve(ca)).then(function(sa){var ua=new XMLHttpRequest,pa=fa?aa+"/"+fa+"pf":aa+"/pf";pa=Object(da.a)(pa)+"&id="+sa;sa=new FormData;sa.append("data",JSON.stringify(ra));
ua.open("POST",pa);ua.withCredentials=!0;ua.send(sa)})}function h(){ca=0;ea||(ea=window.createPromiseCapability())}function ba(){y=new XMLHttpRequest;var ra=aa+"/pf";ra+=0!==ca?"?id="+ca+"&uc="+ma:"?uc="+ma;ma++;y.open("GET",ra,!0);y.withCredentials=!0;y.setRequestHeader("Cache-Control","no-cache");y.setRequestHeader("X-Requested-With","XMLHttpRequest");var sa=y,ua=!1;y.onreadystatechange=function(){a:if(3<=sa.readyState&&!ua){try{var pa=sa.responseText.length}catch(Fa){Object(la.h)("caught exception");
break a}if(0<pa)try{var qa=sa.responseText.split("\n");for(qa[qa.length-1]&&qa.pop();0<qa.length&&3>qa[qa.length-1].length;)"]"===qa.pop()&&h();0<qa.length&&3>qa[0].length&&qa.shift();for(pa=0;pa<qa.length;++pa)qa[pa].endsWith(",")&&(qa[pa]=qa[pa].substr(0,qa[pa].length-1));0===ca&&0<qa.length&&(ca=JSON.parse(qa.shift()).id,pa=ea,ea=null,pa.resolve(ca));var wa;for(pa=0;pa<qa.length;++pa)(wa=JSON.parse(qa[pa]))&&wa.end?close():wa&&wa.hb&&wa.id===ca?n({hb:!0}):na(wa)}catch(Fa){}ia||(ua=!0,ba())}};y.send()}
var y,aa=a(b),fa=e,ca=0,ea=window.createPromiseCapability(),ia=!1,ja=null,na=null,ma=0;return{send:n,SK:function(ra,sa,ua){na=ra;ja=ua;ia=!1;h();ba();sa&&sa();return Promise.resolve()},EG:function(){h();na=null;ia=!0;ja&&ja();y.abort();return Promise.resolve()}}}(z,w)}r.d(va,"a",function(){return oa});var la=r(2),ka=r(31),ha=r(39),da=r(159)}}]);}).call(this || window)

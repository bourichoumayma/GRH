/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[6],{160:function(Ca,va,r){function oa(Na,Oa,La,Ba){return Object(ea.b)(void 0,void 0,void 0,function(){var Ma,Ja,Ka,xa,Da,Ta,Ua,Wa,ab;return Object(ea.d)(this,function(cb){switch(cb.label){case 0:return Ma=Ea.getDocument(),Ja=[1],[4,Object(ia.c)(Oa,{extension:"pdf"})];case 1:return Ka=cb.ea(),xa=Ea.pa(),Ua=(Ta=pa.a).Jca,[4,Ka.HA()];case 2:return Da=Ua.apply(Ta,[cb.ea().xfdfString,Na]),Wa=!0,[4,Ma.yg(Ka,Ja,Na,Wa)];case 3:return cb.ea(),
[4,Ma.uh([Na+1],Wa)];case 4:return cb.ea(),ab=xa.Hb().filter(function(hb){return hb.xI()&&hb.PageNumber===Na}),xa.gj(ab,{force:!0,source:"contentEditTool"}),[4,xa.eI(Da)];case 5:return cb.ea(),Ea.getDocument().PJ(),Ea.OJ(Na),Ea.Ee(),ha(Na),n(Na,La.galleys,Ba),n(Na,La.objects,Ba),[2]}})})}function la(Na){Na=(new DOMParser).parseFromString(Na,"text/html").documentElement.querySelector("body");Na.querySelectorAll("p").forEach(function(Oa){Oa.querySelectorAll("span").forEach(function(Ma){var Ja=Ma.getAttribute("style");
Ja=ka(Ja,Ma.innerHTML);Ma.innerHTML=Ja});var La=Oa.getAttribute("style"),Ba=Oa.innerHTML.replaceAll("<br>","");Oa.innerHTML=ka(La,Ba)});return Na.innerHTML.trim()}function ka(Na,Oa){Na.includes("bold")&&(Oa="<strong>"+Oa+"</strong>");Na.includes("italic")&&(Oa="<em>"+Oa+"</em>");Na.includes("text-decoration: underline")&&(Oa="<u>"+Oa+"</u>");return Oa}function ha(Na){var Oa=Ea.pa(),La=Oa.Hb().filter(function(Ba){return Ba.jh()&&Ba.PageNumber===Na});Oa.gj(La,{force:!0,source:"contentEditTool"})}function da(Na,
Oa){Oa.forEach(function(La){Ia[Na]||(Ia[Na]=[]);Ia[Na].find(function(Ba){return Ba.id===La.id})||Ia[Na].push(La)})}function z(Na,Oa){Oa.forEach(function(La){Fa[Na]||(Fa[Na]=[]);Fa[Na].find(function(Ba){return Ba.id===La.id})||Fa[Na].push(La)})}function w(Na){var Oa=new DOMParser,La=Oa.parseFromString(Na,"text/xml");La.querySelector("parsererror")&&(La=Oa.parseFromString("<Root>"+Na+"</Root>","text/xml"));La.querySelectorAll("a").forEach(function(Ba){var Ma=Ba.childNodes[0];Array.from(Ba.querySelectorAll("*")).find(function(Ja){return"u"===
Ja.tagName.toLowerCase()})||(Ba=document.createElement("u"),Ma.after(Ba),Ba.appendChild(Ma))});return(new XMLSerializer).serializeToString(La)}function x(Na,Oa,La,Ba){this.top=Na;this.left=Oa;this.bottom=La;this.right=Ba;this.topVal=function(){return Math.round(this.top)};this.bottomVal=function(){return Math.round(this.bottom)};this.leftVal=function(){return Math.round(this.left)};this.rightVal=function(){return Math.round(this.right)};this.height=function(){return Math.round(Math.abs(this.top-this.bottom))};
this.width=function(){return Math.round(this.right-this.left)};this.UO=function(Ma){return this.topVal()!=Ma.topVal()||this.leftVal()!=Ma.leftVal()||this.bottomVal()!=Ma.bottomVal()||this.rightVal()!=Ma.rightVal()}}function f(Na,Oa,La,Ba,Ma){this.id=Na;this.pagenum=Oa;this.galleysContents=La;this.contents=Ba;this.galleyBox=Ma}function a(Na,Oa,La,Ba){this.id=Oa;this.type=Na;this.bbox=La;this.pagenum=Ba}function b(Na,Oa,La,Ba,Ma){this.id=Na;this.pagecount=Oa;this.pageBBox=La;this.galleys=Ba;this.objects=
Ma}function e(Na,Oa,La,Ba,Ma){var Ja=[];(new DOMParser).parseFromString(Ba,"text/html").documentElement.querySelectorAll("p").forEach(function(Ta,Ua){Ja[Ua]=Ta.innerHTML});La=(new DOMParser).parseFromString(La,"text/html");var Ka=null;La.documentElement.querySelectorAll("p").forEach(function(Ta,Ua){Ua<Ja.length?(Ta.innerHTML=Ja[Ua],Ka=Ta.getAttribute("style"),Ka=Ka.replace("font:italic","font:normal"),Ka=Ka.replace(" bold "," normal "),Ka=Ka.replace("underline:1;","underline:0;"),Ta.setAttribute("style",
Ka)):Ta.remove()});for(Ba=La.documentElement.querySelectorAll("p").length;Ba<Ja.length;Ba++){var xa=document.createElement("p");xa.setAttribute("id","0");xa.innerHTML=Ja[Ba];null!=Ka&&xa.setAttribute("style",Ka);La.documentElement.querySelector("body").appendChild(xa)}La=La.documentElement.querySelector("body").innerHTML;var Da="";Fa[Na].forEach(function(Ta){Ta.id==Ma&&(Da=Ta)});if(""==Da)return"";Oa="<DOC id='"+Oa.id+"' pagecount='"+Oa.pagecount+"'>";Oa=Oa+("<STORY galley_ids='"+Ma+"' pagenum='"+
Na+"'><galleys>")+(Da.galleysContents+"</galleys>");Da.contents=La;Oa=Oa+La+"\n</STORY>";return Oa+="</DOC>"}function n(Na,Oa,La){var Ba=[],Ma=Ea.getDocument(),Ja=null;Oa.forEach(function(Ka){if(Ka instanceof a){var xa=Ma.Rm(Na,Ka.bbox.leftVal(),Ka.bbox.topVal());var Da=xa.x;var Ta=xa.y;var Ua=Ma.Rm(Na,Ka.bbox.rightVal(),Ka.bbox.bottomVal());xa=Ua.x;Ua=Ua.y}else if(Ka instanceof f)xa=Ma.Rm(Na,Ka.galleyBox.leftVal(),Ka.galleyBox.topVal()),Da=xa.x,Ta=xa.y,Ua=Ma.Rm(Na,Ka.galleyBox.rightVal(),Ka.galleyBox.bottomVal()),
xa=Ua.x,Ua=Ua.y;else return;var Wa=new window.Core.Annotations.RectangleAnnotation,ab=ua.a.OBJECT;Ka instanceof f&&(ab=ua.a.TEXT);Wa.jfa(Ka,ab);Wa.PageNumber=Ka.pagenum;Wa.X=Da;Wa.Y=Ta;Wa.Width=xa-Da;Wa.Height=Ua-Ta;Wa.StrokeColor=new ja.a("#3183C8");Wa.FillColor=new ja.a(255,255,255,.01);Wa.Style="dash";Wa.Dashes="4,3";Wa.rA();Wa.selectionModel=na.a;Ba.push(Wa);"undefined"!==typeof La&&La===Ka.id&&(Ja=Wa)});Oa=Ea.pa();Oa.Oh(Ba);Ja&&Oa.Ig(Ja);Oa.jf(Ba)}function h(Na,Oa,La){return Object(ea.b)(this,
void 0,void 0,function(){var Ba,Ma,Ja,Ka,xa;return Object(ea.d)(this,function(Da){switch(Da.label){case 0:Ba=Na.data;Ja=Ba.cmd;switch(Ja){case "isReady":return[3,1];case "initialiseInfixServer":return[3,3];case "exportFile":return[3,4];case "importText":return[3,5];case "transformObject":return[3,5];case "deleteObject":return[3,6]}return[3,7];case 1:return[4,Object(ra.b)()];case 2:return Ka=Da.ea(),qa.postMessage({cmd:"initialiseInfixServer",l:Ka}),[3,7];case 3:return(xa=ba(Ba.resultsXML))?Oa():La("License key does not have content edit permission"),
[3,7];case 4:return Ba.exportPerformed?y(Ba.pageNumber,Ba.exportXML,Ba.objectXML,Ba.resultsXML):(Ma=Ga[Ba.pageNumber],z(Ba.pageNumber,Ma.galleys),da(Ba.pageNumber,Ma.objects),ha(Ba.pageNumber),n(Ba.pageNumber,Ma.galleys),n(Ba.pageNumber,Ma.objects)),[3,7];case 5:return Ma=Ga[Ba.pageNumber],ca(Ba.pageNumber,Ba.resultsXML),oa(Ba.pageNumber,Ba.pdfBuffer,Ma,Ba.id),[3,7];case 6:return Ma=Ga[Ba.pageNumber],ca(Ba.pageNumber,Ba.resultsXML),Ma.galleys=Ma.galleys.filter(function(Ta){return Ta.id!==Ba.id}),
Ma.objects=Ma.objects.filter(function(Ta){return Ta.id!==Ba.id}),oa(Ba.pageNumber,Ba.pdfBuffer,Ma),[3,7];case 7:return[2]}})})}function ba(Na){Na=new Uint8Array(Na);var Oa=(new TextDecoder("utf-8")).decode(Na);Na=!1;Oa=(new DOMParser).parseFromString(Oa,"text/xml").getElementsByTagName("LicenseCheck");null!==Oa&&0<Oa.length&&(Oa=Oa[0].getElementsByTagName("Status")[0].innerHTML,"error"!=Oa&&"ok"==Oa&&(Na=!0));return Na}function y(Na,Oa,La,Ba){var Ma=new Uint8Array(Oa),Ja=new TextDecoder("utf-8");
Oa=Ja.decode(Ma);Ma=new Uint8Array(La);La=Ja.decode(Ma);Ma=new Uint8Array(Ba);Ba=Ja.decode(Ma);Ga[Na]=fa(Na,Oa,La,Ba);Ba=Ga[Na];z(Na,Ba.galleys);da(Na,Ba.objects);ha(Na);n(Na,Ba.galleys);n(Na,Ba.objects)}function aa(Na,Oa){Na=parseFloat(Na);return isNaN(Oa)||Oa<Na?Na:Oa}function fa(Na,Oa,La,Ba){var Ma;var Ja=new DOMParser;Ba=Ja.parseFromString(Ba,"text/xml");Array.prototype.slice.call(Ba.getElementsByTagName("BBox")).forEach(function(Da){if("CropBox"==Da.getAttribute("Name")){var Ta=parseFloat(Da.getElementsByTagName("Top").item(0).innerHTML),
Ua=parseFloat(Da.getElementsByTagName("Bottom").item(0).innerHTML),Wa=parseFloat(Da.getElementsByTagName("Left").item(0).innerHTML);Da=parseFloat(Da.getElementsByTagName("Right").item(0).innerHTML);Ma=new x(Ta,Wa,Ua,Da)}});Ja=new DOMParser;Ba=Ja.parseFromString(Oa,"text/xml");var Ka=[];Array.prototype.slice.call(Ba.getElementsByTagName("STORY")).forEach(function(Da){var Ta=Da.getAttribute("galley_ids"),Ua=Array.prototype.slice.call(Da.getElementsByTagName("g"))[0],Wa=Ua.getAttribute("bbox").split(" ");
Wa=new x(parseFloat(Wa[0]),parseFloat(Wa[1]),parseFloat(Wa[2]),parseFloat(Wa[3]));Ua=Ua.innerHTML;var ab=Array.prototype.slice.call(Da.getElementsByTagName("galleys"))[0];ab.parentNode.removeChild(ab);Da=Da.innerHTML;Da=(new DOMParser).parseFromString(Da,"text/html").documentElement.querySelector("body").innerHTML.trim();Ta=new f(Ta,Na,Ua,Da,Wa);Ka.push(Ta)});Ja=new DOMParser;var xa=[];Oa=Ja.parseFromString(La,"text/xml").getElementsByTagName("Object");Array.prototype.slice.call(Oa).forEach(function(Da){var Ta=
Da.getAttribute("Type"),Ua=Da.getAttribute("OID");Da=Array.prototype.slice.call(Da.getElementsByTagName("Point"));var Wa=Number.NaN,ab=Number.NaN,cb=Number.NaN,hb=Number.NaN;Da.forEach(function(kb){var fb=kb.getAttribute("Name");"TL"==fb?(Wa=aa(kb.getAttribute("Y"),Wa),cb=aa(kb.getAttribute("X"),cb)):"TR"==fb?(Wa=aa(kb.getAttribute("Y"),Wa),hb=aa(kb.getAttribute("X"),hb)):"BR"==fb?(ab=aa(kb.getAttribute("Y"),ab),hb=aa(kb.getAttribute("X"),hb)):"BL"==fb&&(ab=aa(kb.getAttribute("Y"),ab),cb=aa(kb.getAttribute("X"),
cb))});Da=new x(Wa,cb,ab,hb);Ta=new a(Ta,Ua,Da,Na);xa.push(Ta)});Oa=Array.prototype.slice.call(Ba.getElementsByTagName("DOC"))[0].getAttribute("id");return new b(Oa,1,Ma,Ka,xa)}function ca(Na,Oa){var La;Oa=(new TextDecoder("utf-8")).decode(Oa);Oa=(new DOMParser).parseFromString(Oa,"text/xml");var Ba=Oa.getElementsByTagName("Galley").item(0);if(null!=Ba){var Ma=Ba.getAttribute("id");Ba=Oa.getElementsByTagName("BBox");Ba=Array.prototype.slice.call(Ba);Ba.forEach(function(Ka){var xa=Ka.getElementsByTagName("Top"),
Da=parseFloat(xa.item(0).innerHTML);xa=Ka.getElementsByTagName("Left");var Ta=parseFloat(xa.item(0).innerHTML);xa=Ka.getElementsByTagName("Bottom");var Ua=parseFloat(xa.item(0).innerHTML);xa=Ka.getElementsByTagName("Right");Ka=parseFloat(xa.item(0).innerHTML);La=new x(Da,Ta,Ua,Ka)});Fa[Na].forEach(function(Ka){Ka.id==Ma&&1==La.UO(Ka.galleyBox)&&(Ka.galleyBox=La)})}Ba=Oa.getElementsByTagName("Object").item(0);if(null!=Ba){var Ja=Ba.getAttribute("OID");Ba=Oa.getElementsByTagName("BBox");Ba=Array.prototype.slice.call(Ba);
Ba.forEach(function(Ka){var xa=Ka.getElementsByTagName("Top"),Da=parseFloat(xa.item(0).innerHTML);xa=Ka.getElementsByTagName("Left");var Ta=parseFloat(xa.item(0).innerHTML);xa=Ka.getElementsByTagName("Bottom");var Ua=parseFloat(xa.item(0).innerHTML);xa=Ka.getElementsByTagName("Right");Ka=parseFloat(xa.item(0).innerHTML);La=new x(Da,Ta,Ua,Ka)});Ia[Na].forEach(function(Ka){Ka.id==Ja&&1==La.UO(Ka.bbox)&&(Ka.bbox=La)})}}r.r(va);var ea=r(1),ia=r(63),ja=r(9),na=r(456),ma=r(37),ra=r(74),sa=r(2),ua=r(171),
pa=r(6),qa=null,wa=null,Fa={},Ia={},Ga={},Ea;va["default"]={Gca:function(Na){return Object(ea.b)(void 0,void 0,void 0,function(){return Object(ea.d)(this,function(){wa||(Ea=Na,wa=new Promise(function(Oa,La){qa=new Worker(window.Core.getWorkerPath()+"contentEdit/InfixServerModule.js");qa.onmessage=function(Ba){h(Ba,Oa,La)};qa.postMessage({cmd:"isReady"})}));return[2,wa]})})},Ica:function(Na,Oa,La){return Object(ea.b)(void 0,void 0,void 0,function(){var Ba,Ma,Ja,Ka;return Object(ea.d)(this,function(xa){switch(xa.label){case 0:return ha(Oa),
Fa[Oa]=[],Ia[Oa]=[],[4,Na.Hf([Oa])];case 1:return Ba=xa.ea(),Ma=new TextEncoder,Ja=Ma.encode(""),Ka=Ja.buffer,qa.postMessage({cmd:"exportFile",pageNumber:Oa,performExport:La,pdfFile:Ba,tableData:Ka},[Ba,Ka]),[2]}})})},U3:function(Na){return Object(ea.b)(void 0,void 0,void 0,function(){var Oa,La,Ba,Ma,Ja,Ka,xa,Da;return Object(ea.d)(this,function(Ta){switch(Ta.label){case 0:return Oa=Na.id,La=Na.isText,Ba=Na.pageNumber,Ma=Ea.getDocument(),[4,Ma.Hf([Ba])];case 1:return Ja=Ta.ea(),Ka=new TextEncoder,
xa=Ka.encode(""),Da=xa.buffer,qa.postMessage({cmd:"deleteObject",pdfFile:Ja,pageNumber:Ba,objectID:Oa,isText:La,tableData:Da},[Da]),[2]}})})},Mha:function(Na){return Object(ea.b)(void 0,void 0,void 0,function(){var Oa,La,Ba,Ma,Ja,Ka,xa,Da,Ta,Ua,Wa,ab,cb;return Object(ea.d)(this,function(hb){switch(hb.label){case 0:return Oa=Na.id,La=Na.position,Ba=La.top,Ma=La.left,Ja=La.bottom,Ka=La.right,xa=Na.isText,Da=Na.pageNumber,Ta=Ea.getDocument(),[4,Ta.Hf([Da])];case 1:return Ua=hb.ea(),Wa=new TextEncoder,
ab=Wa.encode(""),cb=ab.buffer,qa.postMessage({cmd:"transformObject",pdfFile:Ua,pageNumber:Da,objectID:Oa,isText:xa,topVal:Ba,leftVal:Ma,bottomVal:Ja,rightVal:Ka,tableData:cb},[cb]),[2]}})})},dia:function(Na,Oa){return Object(ea.b)(void 0,void 0,void 0,function(){var La,Ba,Ma,Ja,Ka,xa,Da,Ta,Ua,Wa,ab,cb,hb,kb,fb;return Object(ea.d)(this,function(lb){switch(lb.label){case 0:La=w(Oa);La=La.replace(/<span style="color: var\(--text-color\);">(.*?)<\/span>/g,"$1");Ba=Na.Et.id;Ma=Na.PageNumber;Ja=Ga[Ma];
Ka=Ja.galleys.find(function(wb){return wb.id===Ba});xa=la(Ka.contents);Da=e(Ma,Ja,xa,La,Ba);if(""==Da)return[3,2];Ta=new TextEncoder;Ua=Ta.encode(Da);Wa=Ua.buffer;ab=Object(ma.c)()||"https://www.pdftron.com/webfonts/v2/";cb=Ea.getDocument();return[4,cb.Hf([Ma])];case 1:return hb=lb.ea(),Ta=new TextEncoder,kb=Ta.encode(""),fb=kb.buffer,qa.postMessage({cmd:"importText",pdfFile:hb,pageNumber:Ma,webFontURL:ab,galleyId:Ba,importData:Wa,tableData:fb},[Wa,fb]),[3,3];case 2:Object(sa.g)("Unable to generate import XML"),
lb.label=3;case 3:return[2]}})})},c8:function(Na){if(Na)return la(Na.contents);Object(sa.g)("Unable to extract document content")}}},456:function(Ca,va,r){var oa=r(1);Ca=r(79);var la=r(46);r=function(ka){function ha(){return null!==ka&&ka.apply(this,arguments)||this}Object(oa.c)(ha,ka);ha.prototype.testSelection=function(da,z,w){return la.a.yk(da,z,w)};return ha}(Ca.a);va.a=r}}]);}).call(this || window)
